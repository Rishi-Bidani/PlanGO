<!DOCTYPE html>
<html lang="en">
	<head>
		<title>PlanGO</title>

		<link rel="stylesheet" href="static/sidenav.css" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
			crossorigin="anonymous"
		/>

		<link rel="stylesheet" href="static/taskgrid.css" />

		<style>
			body {
				background-color: #1d2632;
			}
			.centertitle {
				text-align: center;
				color: white;
				margin-left: 150px;
			}
			.levelup {
				margin-left: 150px;
				height: 11vh;
				grid-row: 1;
				grid-column: 1;
			}
			.progress-level {
				margin-left: 200px;
				width: 30vw;
				grid-row: 1;
				grid-column: 2;
				margin-top: 4.5vh;
				z-index: -1;
			}
			#levelgrid {
				display: grid;
				grid-template-columns: 0vw 100px;
				grid-template-rows: 100%;
			}
		</style>
	</head>
	<body>
		<div class="sidebar">
			<a href="#home" class="nava" id="homebtn" onclick="showhome()">Home</a>
			<a href="#tasks" class="nava" id="taskbtn" onclick="showtasks()">Tasks</a>
			<a href="#contact" class="nava">TimeTable</a>
			<a href="#about" class="nava">Quick notes</a>
			<a href="#about" class="nava">Expenses</a>
		</div>
		<div id="levelgrid">
			<img src="assets/star.png" alt="star" class="levelup" />
			<div class="progress progress-level">
				<div class="progress-bar bg-warning" style="width: 40%"></div>
			</div>
		</div>

		<div id="home" class="screen centertitle" style="display: none">
			<h1>Home</h1>
		</div>

		<div
			id="tasks"
			class="screen centertitle"
			style="display: none; margin-right: 100px"
		>
			<h1>Tasks</h1>
			<div class="container" id="time">
				<div class="container" id="todaycol">
					<h2>Today's Tasks</h2>

					<div
						class="container"
						id="today"
						style="border: 3px solid white; border-radius: 20px"
					>
						<ul id="t"></ul>
					</div>
				</div>

				<div class="container" id="weekcol">
					<h2>This Week's Tasks</h2>

					<div
						class="container"
						id="week"
						style="border: 3px solid white; border-radius: 20px"
					>
						<ul id="tw"></ul>
					</div>
				</div>
			</div>
		</div>

		<script>
			const path = require("path");
			const electron = require("electron");
			const { ipcRenderer } = electron;

			let task = document.getElementById("tasks");
			let taskbtn = document.getElementById("taskbtn");

			let allnav = document.getElementsByClassName("nava");
			let allscreens = document.getElementsByClassName("screen");

			let home = document.getElementById("home");
			let homebtn = document.getElementById("homebtn");

			let main = document.getElementById("main");

			function showtasks() {
				for (var i = 0; i < allscreens.length; i++) {
					allscreens[i].style.display = "none";
				}
				task.style.display = "block";
				taskbtn.className = "active";
				homebtn.className = "";
			}

			function showhome() {
				for (var i = 0; i < allscreens.length; i++) {
					allscreens[i].style.display = "none";
				}

				home.style.display = "block";
				homebtn.className = "active";
				taskbtn.className = "";
			}

			ipcRenderer.on("item:task", function (e, item) {
				console.log(item);
				const ul2 = document.getElementById("tw");
				ul.innerHTML = "";
				ul.className = "";
				ul2.innerHTML = "";
				ul2.className = "";
				for (var i = 0; i < item.length; i++) {
					console.log(item[i].task);
					let ul = "";

					if (item[i].time == "today") {
						ul = document.getElementById("t");
					} else {
						ul = document.getElementById("tw");
					}
					const li = document.createElement("li");
					ul.className = "collection";
					li.className = "collection-item";

					const itemText = document.createTextNode(item[i].task);

					li.appendChild(itemText);
					ul.appendChild(li);
				}
				showtasks();
			});

			// //Remove Items
			const ul = document.querySelector("ul");
			const ul2 = document.getElementById("tw");

			const li = document.createElement("li");

			ul.addEventListener("dblclick", removeItem);
			ul2.addEventListener("dblclick", removeItem);

			function removeItem(e) {
				// var myVal = e.target.innerHTML;
				// console.log(myVal);
				e.target.remove();
				if (ul.children.length == 0) {
					ul.className = "";
				}
				ipcRenderer.send("item:toDelete", e.target.innerHTML);
			}
		</script>

		<div class="centertitle screen" id="main">
			<h1>This</h1>
		</div>
	</body>
</html>
